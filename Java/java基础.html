<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>反射通过配置文件运行类方法 | FengHua&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/docs/favion.ico">
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/docs/assets/css/0.styles.bd90004f.css" as="style"><link rel="preload" href="/docs/assets/js/app.a61f06bb.js" as="script"><link rel="preload" href="/docs/assets/js/2.51900861.js" as="script"><link rel="preload" href="/docs/assets/js/7.4d971b2a.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.9e7d4c8a.js"><link rel="prefetch" href="/docs/assets/js/11.573032e8.js"><link rel="prefetch" href="/docs/assets/js/12.25beac2c.js"><link rel="prefetch" href="/docs/assets/js/13.9b6b3446.js"><link rel="prefetch" href="/docs/assets/js/14.06a762c8.js"><link rel="prefetch" href="/docs/assets/js/15.32708a46.js"><link rel="prefetch" href="/docs/assets/js/3.59e40857.js"><link rel="prefetch" href="/docs/assets/js/4.3df4d291.js"><link rel="prefetch" href="/docs/assets/js/5.f5e154f3.js"><link rel="prefetch" href="/docs/assets/js/6.bfe4258d.js"><link rel="prefetch" href="/docs/assets/js/8.cea70b62.js"><link rel="prefetch" href="/docs/assets/js/9.10cf0109.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.bd90004f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/logo.png" alt="FengHua's Blog" class="logo"> <span class="site-name can-hide">FengHua's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="java" class="dropdown-title"><span class="title">java</span> <span class="arrow down"></span></button> <button type="button" aria-label="java" class="mobile-dropdown-title"><span class="title">java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/Java/java基础.html" class="nav-link">
  Java基础
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="spring系列" class="dropdown-title"><span class="title">spring系列</span> <span class="arrow down"></span></button> <button type="button" aria-label="spring系列" class="mobile-dropdown-title"><span class="title">spring系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/spring系列/Spring5.html" class="nav-link">
  Spring5
</a></li><li class="dropdown-item"><!----> <a href="/docs/spring系列/Spring整合Mybatis.html" class="nav-link">
  Spring整合Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/docs/spring系列/SpringMVC.html" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-item"><!----> <a href="/docs/spring系列/SSM整合.html" class="nav-link">
  SSM整合
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="docker" class="dropdown-title"><span class="title">docker</span> <span class="arrow down"></span></button> <button type="button" aria-label="docker" class="mobile-dropdown-title"><span class="title">docker</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/docker/docker.html" class="nav-link">
  docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue" class="mobile-dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/vue/vue.html" class="nav-link">
  vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="git" class="dropdown-title"><span class="title">git</span> <span class="arrow down"></span></button> <button type="button" aria-label="git" class="mobile-dropdown-title"><span class="title">git</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/git/git.html" class="nav-link">
  git
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="java" class="dropdown-title"><span class="title">java</span> <span class="arrow down"></span></button> <button type="button" aria-label="java" class="mobile-dropdown-title"><span class="title">java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/Java/java基础.html" class="nav-link">
  Java基础
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="spring系列" class="dropdown-title"><span class="title">spring系列</span> <span class="arrow down"></span></button> <button type="button" aria-label="spring系列" class="mobile-dropdown-title"><span class="title">spring系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/spring系列/Spring5.html" class="nav-link">
  Spring5
</a></li><li class="dropdown-item"><!----> <a href="/docs/spring系列/Spring整合Mybatis.html" class="nav-link">
  Spring整合Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/docs/spring系列/SpringMVC.html" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-item"><!----> <a href="/docs/spring系列/SSM整合.html" class="nav-link">
  SSM整合
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="docker" class="dropdown-title"><span class="title">docker</span> <span class="arrow down"></span></button> <button type="button" aria-label="docker" class="mobile-dropdown-title"><span class="title">docker</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/docker/docker.html" class="nav-link">
  docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue" class="mobile-dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/vue/vue.html" class="nav-link">
  vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="git" class="dropdown-title"><span class="title">git</span> <span class="arrow down"></span></button> <button type="button" aria-label="git" class="mobile-dropdown-title"><span class="title">git</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/git/git.html" class="nav-link">
  git
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>反射通过配置文件运行类方法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#反射通过配置文件运行类方法" class="sidebar-link">反射通过配置文件运行类方法</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#模块化概述" class="sidebar-link">模块化概述</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#jdk内置注解" class="sidebar-link">JDK内置注解</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#自定义注解" class="sidebar-link">自定义注解</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#元注解" class="sidebar-link">元注解</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#多线程的实现方式" class="sidebar-link">多线程的实现方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#方式1-继承thread类" class="sidebar-link">方式1：继承Thread类</a></li><li class="sidebar-sub-header"><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#方式2-实现runnable接口" class="sidebar-link">方式2：实现Runnable接口</a></li></ul></li><li><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#设置和获取线程名称" class="sidebar-link">设置和获取线程名称</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#线程调度" class="sidebar-link">线程调度</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#线程控制" class="sidebar-link">线程控制</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#线程生命周期" class="sidebar-link">线程生命周期</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#线程同步" class="sidebar-link">线程同步</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#同步代码块解决线程安全问题" class="sidebar-link">同步代码块解决线程安全问题</a></li><li class="sidebar-sub-header"><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#同步方法" class="sidebar-link">同步方法</a></li></ul></li><li><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#线程安全的类" class="sidebar-link">线程安全的类</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#lock锁" class="sidebar-link">Lock锁</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/Java/java%E5%9F%BA%E7%A1%80.html#生产者-消费者模式" class="sidebar-link">生产者/消费者模式</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="反射通过配置文件运行类方法"><a href="#反射通过配置文件运行类方法" class="header-anchor">#</a> 反射通过配置文件运行类方法</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//      创建Properties类加载对象</span>
        <span class="token class-name">Properties</span> prop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">FileReader</span> fileReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">&quot;class.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        加载数据</span>
        prop<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>fileReader<span class="token punctuation">)</span><span class="token punctuation">;</span>
        fileReader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        根据键获取类名和方法名</span>
        <span class="token class-name">String</span> className <span class="token operator">=</span> prop<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;className&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> method <span class="token operator">=</span> prop<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;methodName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        拿到类名获取字节码对象</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> aClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        通过字节码对象构建类实例</span>
        <span class="token class-name">Object</span> o <span class="token operator">=</span> aClass<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        通过反射获取方法</span>
        <span class="token class-name">Method</span> study <span class="token operator">=</span> aClass<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        执行对应方法</span>
        study<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h1 id="十七-java模块化"><a href="#十七-java模块化" class="header-anchor">#</a> 十七.Java模块化</h1> <h2 id="模块化概述"><a href="#模块化概述" class="header-anchor">#</a> 模块化概述</h2> <p>Java语言随着这些年的发展已经成为了一门影响深远的编程语言，无数平台，系统都采用Java语言编写。但是，伴随着发展，Java也越来越庞大，逐渐发展成为一门“臃肿”的语言。而且，无论是运行一个大型的软件系统，还是运行一个小的程序，即使程序只需要使用Java的部分核心功能，VM也要加载整个JRE环境。为了给Java“瘦身”，让Java实现轻量化，Java 9正式的推出了模块化系统。Java被拆分为N多个模块，并允许Java程序可以根据需要选择加载程序必须的Java模块，这样就可以让Java以轻量化的方式来运行。</p> <p>其实，Java 7的时候已经提出了模块化的概念，但由于其过于复杂，Java7，Java8都一直未能真正推出，直到Java 9才真正成熟起来。对于Java语言来说，模块化系统是一次真正的自我革新，这种革新使得“古老而庞大”的Java语言重新焕发年轻的活力。</p> <h1 id="十八-注解"><a href="#十八-注解" class="header-anchor">#</a> 十八.注解</h1> <p>**概念：**说明程序的。给计算机看的</p> <p>**注释：**用文字描述程序的。给程序员看的</p> <p>**定义：**注解(Annotation)，也叫元数据。一种代码级别的说明。它是JXK1.5及以后版本引入的一个特性，与类、接口、枚举是在同一个层次。它可以声明在包、类、字段、方法、局部变量、方法参数等的前面，用来对这些元秦进行说明，注释。</p> <p><strong>作用</strong></p> <ul><li>编写文档：通过代码里标识的元数据生成文档【生成文档doc文档】</li> <li>代码分析：通过代码里标识的元数据对代码进行分析【使用反射】</li> <li>编译检查：通过代码里标识的元数据让编译器能够实现基本的编译检查【override】</li></ul> <h2 id="jdk内置注解"><a href="#jdk内置注解" class="header-anchor">#</a> JDK内置注解</h2> <ul><li>@Override：用来检测被该注解标注的方法是否是继承自父类（父接口）</li> <li>@Deprecated：将该注解标注的内容，已过时</li> <li>@SuppressWarnings：压制警告，金庸编译器提示的警告，可以在类上使用，参数[&quot;all&quot;,,,]</li> <li>@Overload：重写父类（父接口）方法</li> <li>@SafeVarargs：参数安全类型注解。它的目的是提醒开发者不要用参数做一些不安全的操作,它的存在会阻止编译器产生 unchecked 这样的警告</li> <li>@FunctionalInterface：函数式接口 (Functional Interface) 就是一个具有一个方法的普通接口。</li></ul> <h2 id="自定义注解"><a href="#自定义注解" class="header-anchor">#</a> 自定义注解</h2> <p><strong>自定义注解格式</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>元注解
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> 注解名称<span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>注解的本质</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MyAnno</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span>Annotation</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">//注解本质上就是一个接口，该接口继承Annotation接口</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>属性</strong></p> <p>在注解接口中的抽象方法</p> <p>属性要求：</p> <ul><li>返回值类型要求：基本数据类型、String、枚举、注解、以上类型的数组。</li> <li>定义了属性（抽象方法），在使用时需要给所有属性赋值。
<ul><li>如果定义属性是使用了default关键字给属性默认初始化值，则使用注解时可以不进行属性的赋值</li> <li>如果定义的属性名称为<code>value</code>时，value关键字可以不写，直接赋值</li></ul></li></ul> <p><strong>定义注解</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyAnno</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> <span class="token function">show1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">Person</span> <span class="token function">per</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token constant">P1</span><span class="token punctuation">;</span>

    <span class="token class-name">MyAnno2</span> <span class="token function">anno2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token annotation punctuation">@MyAnno2</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">strs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>使用注解</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnnoDemo</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@MyAnno</span><span class="token punctuation">(</span>show1 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token annotation punctuation">@MyAnno</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;王五&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token annotation punctuation">@MyAnno</span><span class="token punctuation">(</span>per <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token constant">P2</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">per</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token annotation punctuation">@MyAnno</span><span class="token punctuation">(</span>anno2 <span class="token operator">=</span> <span class="token annotation punctuation">@MyAnno2</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">anno2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token annotation punctuation">@MyAnno</span><span class="token punctuation">(</span>strs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">strs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="元注解"><a href="#元注解" class="header-anchor">#</a> 元注解</h2> <p>元注解是用于描述注解的注解</p> <ul><li>@Target：描述能够作用的位置
<ul><li>ElementType取值
<ul><li>TYPE：可以作用于类上</li> <li>METHOD：可以作用于方法上</li> <li>FIELD：可以作用于成员变量上</li></ul></li></ul></li> <li>@Retention：描述注解被保留的阶段
<ul><li>RetentionPolicy取值
<ul><li>RUNTIME：会保留到class字节码文件中，并被JVM读取到</li> <li>CLASS：会保留到class字节码文件中，不会被JVM读取到</li> <li>SOURCE：只保留在源代码中</li></ul></li></ul></li> <li>@Documented：描述注解是否被抽取到api文档中</li> <li>@Inherited：描述注解是否被子类继承</li></ul> <h1 id="十九-多线程编程"><a href="#十九-多线程编程" class="header-anchor">#</a> 十九.多线程编程</h1> <h2 id="多线程的实现方式"><a href="#多线程的实现方式" class="header-anchor">#</a> 多线程的实现方式</h2> <h3 id="方式1-继承thread类"><a href="#方式1-继承thread类" class="header-anchor">#</a> <strong>方式1：继承Thread类</strong></h3> <ol><li>定义一个类MyThread继承Thread类</li> <li>在MyThread类中重写run()方法</li> <li>创建MyThread类的对象</li> <li>启动线程</li></ol> <p><strong>两个小问题：</strong></p> <ul><li>为什么要重写run()方法?
<ul><li>因为run()是用来封装被线程执行的代码</li></ul></li> <li>run()方法和start()方法的区别?
<ul><li>run():  封装线程执行的代码，直接调用，相当于普通方法的调用</li> <li>start():启动线程;然后由JVM调用此线程的run()方法</li></ul></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadDemo</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ThreadDemo</span> td <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        td<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;关羽&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        td<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="方式2-实现runnable接口"><a href="#方式2-实现runnable接口" class="header-anchor">#</a> 方式2：实现Runnable接口</h3> <ol><li>定义一个类MyRunnable实现Runnable接口</li> <li>在MyRunnable类中重写run()方法</li> <li>创建MyRunnable类的对象</li> <li>创建Thread类的对象，把MyRunnable对象作为构造方法的参数</li> <li>启动线程</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RunnableDemo</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">RunnableDemo</span> runnableDemo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RunnableDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>runnableDemo<span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;哈拉少&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="设置和获取线程名称"><a href="#设置和获取线程名称" class="header-anchor">#</a> 设置和获取线程名称</h2> <p><strong>Thread类中设置和获取线程名称的方法</strong></p> <ul><li>void setName(Stringname)：将此线程的名称更改为等于参数</li> <li>nameString getName()：返回此线程的名称</li></ul> <h2 id="线程调度"><a href="#线程调度" class="header-anchor">#</a> 线程调度</h2> <p><strong>线程有两种调度模型</strong></p> <ul><li><p>分时调度模型：所有线程轮流使用CPU的使用权，平均分配每个线程占用CPU的时间片。</p></li> <li><p>抢占式调度模型：优先让优先级高的线程使用CPU，如果线程的优先级相同，那么会随机选择一个优先级高的线程获取的CPU时间片相对多一些。</p></li></ul> <p>Java使用的是抢占式调度模型。</p> <p>假如计算机只有一个CPU，那么CPU在某一个时刻只能执行一条指令，线程只有得到CPU时间片，也就是使用权,才可以执行指令。所以说多线程程序的执行是有<code>随机性</code>，因为谁抢到CPU的使用权是不一定的。</p> <p><strong>Thread类中设置和获取线程优先级的方法</strong></p> <ul><li><p>public final int getPriority()：返回此线程的优先级。</p></li> <li><p>public final void setPriority(int newPriority)：更改此线程的优先级。</p></li></ul> <h2 id="线程控制"><a href="#线程控制" class="header-anchor">#</a> 线程控制</h2> <table><thead><tr><th>方法名</th> <th>说明</th></tr></thead> <tbody><tr><td>static void sleep(long millis)</td> <td>使当前正在执行的线程停留（暂停执行）指定的毫秒数。</td></tr> <tr><td>void join()</td> <td>等待这个线程死亡。</td></tr> <tr><td>void setDaemon(boolean on)</td> <td>将此线程标记为守护线程，当运行的线程都是守护线程时，Java虚拟机将退出。</td></tr></tbody></table> <h2 id="线程生命周期"><a href="#线程生命周期" class="header-anchor">#</a> 线程生命周期</h2> <p><img src="http://img.fancynet.cn/typora_img/image-20220721130405837.png" alt="image-20220721130405837"></p> <h2 id="线程同步"><a href="#线程同步" class="header-anchor">#</a> 线程同步</h2> <h3 id="同步代码块解决线程安全问题"><a href="#同步代码块解决线程安全问题" class="header-anchor">#</a> 同步代码块解决线程安全问题</h3> <p>锁多条语句操作共享数据，可以使用同步代码块实现。</p> <p><strong>格式</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>synchronized (任意对象){ 多条语句操作共享数据的代码 }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>tickets <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> threadName <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>threadName <span class="token operator">+</span> <span class="token string">&quot;正在出售第&quot;</span> <span class="token operator">+</span> tickets <span class="token operator">+</span> <span class="token string">&quot;张票&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                tickets<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>同步的好处和弊端</strong></p> <p>好处: 解决了多线程的数据安全问题.</p> <p>弊端: 当线程很多时，因为每个线程都会去判断同步上的锁，这是很耗费资源的，无形中会降低程序的运行效率.</p> <h3 id="同步方法"><a href="#同步方法" class="header-anchor">#</a> 同步方法</h3> <p>同步方法：就是把synchronized关键字加到方法上。</p> <p><strong>格式</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>修饰符 <span class="token keyword">synchronized</span> 返回值类型 方法名<span class="token punctuation">(</span>方法参数<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">sellTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>tickets <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> threadName <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>threadName <span class="token operator">+</span> <span class="token string">&quot;正在出售第&quot;</span> <span class="token operator">+</span> tickets <span class="token operator">+</span> <span class="token string">&quot;张票&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tickets<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>同步方法的锁对象是什么呢?</p> <ul><li>同步方法：==this==</li> <li>同步静态方法：==类名.class==</li></ul> <p>同步静态方法:就是把<code>synchronized</code>关键字加到静态方法上</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>修饰符 <span class="token keyword">static</span> <span class="token keyword">synchronized</span> 返回值类型 方法名<span class="token punctuation">(</span>方法参数<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">sellTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>tickets <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> threadName <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>threadName <span class="token operator">+</span> <span class="token string">&quot;正在出售第&quot;</span> <span class="token operator">+</span> tickets <span class="token operator">+</span> <span class="token string">&quot;张票&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tickets<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="线程安全的类"><a href="#线程安全的类" class="header-anchor">#</a> 线程安全的类</h2> <p><strong>StringBuffer</strong></p> <ul><li>线程安全，可变的字符序列</li> <li>从版本JDK5开始，被StringBuilder替代。通常应该使用StringBuilder类，因为它支持所有相同的操作，但它更快，因为它不执行同步</li></ul> <p><strong>Vector</strong></p> <ul><li>从Java 2平台v1.2开始，该类改进了List接口，使其成为Java CollectionsFramework的成员与新的集合实现不同， Vector被同步。如果不需要线程安全的实现，建议使用ArrayList代替Vector</li></ul> <p><strong>Hashtable</strong></p> <ul><li>该类实现了一个哈希表，它将键映射到值。任何非null对象都可以用作键或者值</li> <li>从Java 2平台v1.2开始，该类进行了改进，实现了Map接口，使其成为JavaCollections Framework的成员。与新的集合实现不同，Hashtable被同步。如果不需要线程安全的实现，建议使用HashMap代替Hashtable</li></ul> <h2 id="lock锁"><a href="#lock锁" class="header-anchor">#</a> Lock锁</h2> <p>虽然我们可以理解同步代码块和同步方法的锁对象问题，但是我们并没有直接看到在哪里加上了锁，在哪里释放了锁,为了更清晰的表达如何加锁和释放锁，JDK5以后提供了一个新的锁对象Lock。</p> <p>Lock实现提供比使用synchronized方法和语句可以获得更广泛的锁定操作。</p> <p>Lock中提供了获得锁和释放锁的方法：</p> <ul><li><p>void lock()：获得锁</p></li> <li><p>void unlock()：释放锁</p></li></ul> <p>Lock是接口不能直接实例化，这里采用它的实现类<code>ReentrantLock</code>来实例化。</p> <p>ReentrantLock的构造方法
ReentrantLock()：创建一个ReentrantLock的实例</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sellTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>tickets <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> threadName <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>threadName <span class="token operator">+</span> <span class="token string">&quot;正在出售第&quot;</span> <span class="token operator">+</span> tickets <span class="token operator">+</span> <span class="token string">&quot;张票&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            tickets<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="生产者-消费者模式"><a href="#生产者-消费者模式" class="header-anchor">#</a> 生产者/消费者模式</h2> <p>所谓生产者消费者问题，实际上主要是包含了两类线程：</p> <ul><li>一类是生产者线程用于生产数据。</li> <li>一类是消费者线程用于消费数据。</li></ul> <p>为了解耦生产者和消费者的关系，通常会采用共享的数据区域，就像是一个仓库。</p> <p>生产者生产数据之后直接放置在共享数据区中，并不需要关心消费者的行为。</p> <div class="language-mermaid line-numbers-mode"><pre class="language-mermaid"><code><span class="token keyword">graph</span> LR<span class="token punctuation">;</span>
生产者<span class="token arrow operator">--&gt;</span>共享数据区域<span class="token punctuation">;</span>
消费者<span class="token arrow operator">--&gt;</span>共享数据区域
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>为了体现生产和消费过程中的等待和唤醒，Java就提供了几个方法供我们使用，这几个方法在Object类中Object类的等待和唤醒方法：</p> <table><thead><tr><th>方法名</th> <th>说明</th></tr></thead> <tbody><tr><td>void wait()</td> <td>导致当前线程等待，直到另一个线程调用该对象的notify()方法或notifyAll()方法</td></tr> <tr><td>void notify()</td> <td>唤醒正在等待对象监视器的单个线程</td></tr> <tr><td>void notifyAll()</td> <td>唤醒正在等待对象监视器的所有线程</td></tr></tbody></table> <h1 id="拓展知识"><a href="#拓展知识" class="header-anchor">#</a> 拓展知识</h1> <p><strong>java内置命令</strong></p> <ul><li>java：执行Java字节码文件</li> <li>javac：编译Java文件</li> <li>javadoc：生成类描述文档</li> <li>javap：反编译字节码文件</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.a61f06bb.js" defer></script><script src="/docs/assets/js/2.51900861.js" defer></script><script src="/docs/assets/js/7.4d971b2a.js" defer></script>
  </body>
</html>
